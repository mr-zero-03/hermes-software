import{Q}from"./QPage.a4ec28e2.js";import{D as u,R as C,H as t,F as l,O as s,L as y,M as k,E as b,Q as A,G as _,I as d,B as v,T as V,N as F}from"./index.fbf81f8b.js";import{Q as S,C as D,a as U,v as q,b as E,c as M,d as B}from"./v4.abf2165f.js";import{Q as c,a as x}from"./QCard.42f01069.js";import{Q as h,a as w}from"./QCardActions.746e4521.js";import{Q as N}from"./QSeparator.ee139416.js";import{_ as g}from"./plugin-vue_export-helper.21dcd24c.js";import{u as I}from"./users.23f5ace6.js";import"./QItem.02e266b5.js";import"./use-dark.b51b21d9.js";import"./use-timeout.edde8f2c.js";const L={emits:["save","delete"],props:{createAction:{type:Boolean,default:!0},userData:{type:Object}},data(){return{roles:[{label:"Admin",value:"admin"},{label:"Comerciante",value:"comerciante"}],deleteModal:!1,dataForm:this.userData}},methods:{onSave(){this.$emit("save")},onDelete(){const r=this.userData.id;this.$emit("delete",r)},showDeleteteModal(){this.deleteModal=!this.deleteModal}}},R={class:"text-h5 text-center"},T={class:"form-input q-pb-sm"},z={class:"form-input q-pb-sm"},P={class:"form-input q-pb-sm"},j={class:"form-input q-pb-sm"};function G(r,e,i,f,a,n){return u(),C(V,null,[t(x,{class:"q-pa-sm q-py-md",flat:""},{default:l(()=>[t(c,{class:""},{default:l(()=>[s("div",R,[y(k(i.createAction?"Crear Nuevo":"Editar")+" Usuario ",1),_("",!0)])]),_:1}),t(c,null,{default:l(()=>[s("div",T,[e[6]||(e[6]=s("span",null,"Nombre",-1)),t(h,{standout:"",outlined:"",modelValue:a.dataForm.name,"onUpdate:modelValue":e[0]||(e[0]=o=>a.dataForm.name=o),dense:""},null,8,["modelValue"])]),s("div",z,[e[7]||(e[7]=s("span",null,"Email",-1)),t(h,{standout:"",outlined:"",modelValue:a.dataForm.email,"onUpdate:modelValue":e[1]||(e[1]=o=>a.dataForm.email=o),dense:""},null,8,["modelValue"])]),s("div",P,[e[8]||(e[8]=s("span",null,"Password",-1)),t(h,{standout:"",outlined:"",modelValue:a.dataForm.password,"onUpdate:modelValue":e[2]||(e[2]=o=>a.dataForm.password=o),dense:""},null,8,["modelValue"])]),s("div",j,[e[9]||(e[9]=s("span",null,"Role del Usuario",-1)),t(S,{label:"Rol",modelValue:a.dataForm.role,"onUpdate:modelValue":e[3]||(e[3]=o=>a.dataForm.role=o),options:a.roles,"emit-value":"",color:"primary"},null,8,["modelValue","options"])])]),_:1}),t(w,{class:"flex justify-between"},{default:l(()=>[t(d,{label:i.createAction?"Crear":"Actualizar",color:"primary","no-caps":"",class:"",onClick:n.onSave},null,8,["label","onClick"]),i.createAction?v((u(),b(d,{key:0,label:"Cancelar",color:"negative","no-caps":"",class:""},null,512)),[[D]]):_("",!0),i.createAction?_("",!0):(u(),b(d,{key:1,label:"Eliminar",icon:"delete",color:"negative",flat:"",onClick:e[4]||(e[4]=o=>n.showDeleteteModal())}))]),_:1})]),_:1}),t(U,{modelValue:a.deleteModal,"onUpdate:modelValue":e[5]||(e[5]=o=>a.deleteModal=o),persistent:""},{default:l(()=>[t(x,{flat:"",bordered:""},{default:l(()=>[t(c,{horizontal:""},{default:l(()=>[t(c,{class:"q-pt-xs"},{default:l(()=>e[10]||(e[10]=[s("div",{class:"text-overline"},"\xA1Piensalo bien!",-1),s("div",{class:"text-caption text-grey"},"Recuerda que esta accion no se podra reversar",-1)])),_:1})]),_:1}),t(N),t(w,{align:"right"},{default:l(()=>[v(t(d,{flat:"",color:"negative",label:"Cancelar"},null,512),[[D]]),v(t(d,{flat:"",color:"primary",label:"Aceptar",onClick:n.onDelete},null,8,["onClick"]),[[D]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}var O=g(L,[["render",G]]);const p=I(),H={components:{UsersForm:O},setup(){return{columns:[{name:"name",label:"Username",align:"center",field:"name"},{name:"email",label:"Email",align:"center",field:"email"},{name:"role",label:"Role",align:"center",field:"role"},{name:"pc-icon",label:"Editar",align:"center",field:"pc-icon"}]}},data(){return{data:this.getDefaultData(),showForm:!1,createAction:!0,confirm:!1,tableData:[]}},mounted(){console.log("Getting data..."),this.refreshData()},methods:{refreshData(){this.tableData=p.getData()},getDefaultData(){return{id:q(),name:"",email:"",password:"",role:""}},cleanFields(){this.data=this.getDefaultData()},openCreateModal(){this.cleanFields(),this.showForm=!0,this.createAction=!0},onEdit(r){this.showForm=!0,this.createAction=!1,this.data={...r}},onSave(){this.createAction?this.saveData():this.updateData(),this.refreshData(),this.$refs.formDialog.hide()},onDelete(r){this.deleteData(r),this.refreshData(),this.$refs.formDialog.hide()},saveData(){p.addData(this.data)},updateData(){p.updateData(this.data)},deleteData(r){p.deleteData(r)}}},J={class:"full-width text-right"};function K(r,e,i,f,a,n){const o=F("UsersForm");return u(),C(V,null,[s("div",J,[t(d,{class:"q-my-md",color:"primary",label:"Crear Usuario",onClick:n.openCreateModal},null,8,["onClick"])]),t(B,{rows:a.tableData,columns:f.columns,"row-key":"name",class:"full-width users-table shadow-6","table-header-class":"bg-primary text-white text-weight-bold"},{"body-cell-pc-icon":l(m=>[t(E,{props:m},{default:l(()=>[t(A,{size:"20px",name:"edit",class:"cursor-pointer text-primary",onClick:$=>n.onEdit(m.row)},{default:l(()=>[t(M,{class:"bg-primary text-white"},{default:l(()=>e[1]||(e[1]=[y(" Editar Usuario ")])),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"]),t(U,{ref:"formDialog",modelValue:a.showForm,"onUpdate:modelValue":e[0]||(e[0]=m=>a.showForm=m)},{default:l(()=>[t(x,{class:"full-width q-pa-md",style:{"max-width":"500px"}},{default:l(()=>[t(o,{userData:a.data,createAction:a.createAction,onSave:n.onSave,onDelete:n.onDelete},null,8,["userData","createAction","onSave","onDelete"])]),_:1})]),_:1},8,["modelValue"])],64)}var W=g(H,[["render",K],["__scopeId","data-v-1b4ea0d2"]]);const X={components:{UsersList:W}},Y={class:"users-list full-width"};function Z(r,e,i,f,a,n){const o=F("UsersList");return u(),b(Q,{class:"flex flex-center q-px-md"},{default:l(()=>[e[0]||(e[0]=s("div",{class:"text-h3 full-width text-center"},"Lista de Usuarios",-1)),s("div",Y,[t(o)])]),_:1})}var me=g(X,[["render",Z],["__scopeId","data-v-1efcdea7"]]);export{me as default};
